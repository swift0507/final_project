<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="dao.ReviewDao">
	<insert id="insertReview" parameterType="review">
		insert into review
		values (#{review_id}, #{receiptorder_id}, #{prod_id}, #{prod_name},
		#{review_writer}, #{review_score}, #{review_content}, #{review_date},
		#{review_answer}, #{review_pict}, #{review_status})
	</insert>

	<update id="updateReview" parameterType="review">
		update into review set
		receiptorder_id=#{receiptorder_id},
		prod_id=#{prod_id},
		prod_name=#{prod_name},
		review_writer=#{review_writer},
		review_score=#{review_score},
		review_content=#{review_content},
		review_date=#{review_date},
		review_answer=#{review_answer},
		review_pict=#{review_pict},
		review_status=#{review_status} where
		review_id=#{review_id}
	</update>

	<delete id="deleteReview" parameterType="int">
		delete from review where
		review_id=#{review_id}

	</delete>

	<select id="selectAll" parameterType="int" resultType="review">
		select *
		from review
	</select>

	
	<select id="selectById" parameterType="java.util.HashMap" resultType="Review">
    		select * from (select rownum as rn, e.* from (select * from review where prod_id = #{ prod_id } order by review_id desc) e) 
    		where rn between #{offset} and (#{offset} + #{boardsPerPage} - 1)
    	</select>
    	
    <select id="getCountById" parameterType="int" resultType="int">
   		select count(*) from review where prod_id = #{ prod_id }
   	</select>

</mapper>
